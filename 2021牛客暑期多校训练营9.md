# 牛客第九场题解

> H:happy number

## 题意：

只由2，3，6组成的数是happy number，问第n个happy number 是啥

## 解法：

找规律，先求长度，发现是3^1 + 3^2 + 3^3...，再逐位确定

## WA原因：

1. 求长度是时候容易出现问题
2. 我的写法在3，12，37等地方需要特判

## 代码：

```c++
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;

int main(){
	int n;
	scanf("%d",&n);
	vector<ll> num3;
	vector<ll> mi3;
	num3.push_back(0);
	mi3.push_back(1);
	ll now = 0;
	ll ad = 3;
	while(now < 1e9+7){
		mi3.push_back(ad);
		now += ad;
		num3.push_back(now);
		ad *= 3;
	}
	int len = 0;
	for(int i = 0;i < num3.size() - 1;i++){
		if(n == num3[i]){
			while(i--){
				cout<<6;
			}
			return 0;
		}
//		cout<<num3[i]<<" ";
		if(num3[i] <= n && num3[i+1] > n){
			len = i + 1;
			break;
		} 
	}
	int tmp = len;
	n -= num3[len - 1];
//	cout<<n<<endl;
	while(len -- ){
		int tag = n / mi3[tmp - 1];
		int mod = n % mi3[tmp-1];
//		cout<<"tag:"<<tag<<endl;
		if(mod != 0)
			n -= tag * mi3[tmp-1];
		else{
			n -= (tag - 1) * mi3[tmp-1];
		}
		if(tag == 0 || (tag == 1 && mod == 0)) cout<<2;
		else if(tag == 1 || (tag == 2 && mod == 0)) cout<<3;
		else cout<<6;
		tmp--;
	}
}
```



